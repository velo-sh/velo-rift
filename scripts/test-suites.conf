# Test Suite Configuration (SSOT)

# Python Test Paths
TEST_PATHS_QUICK="tests/qa/quick"
TEST_PATHS_FULL="tests/qa"
TEST_PATHS_DOCKER="tests/qa"

# Tier 0: Fast checks (Build + Crate Tests + Static Analysis)
TIER0_TESTS=(
    "cargo fmt --check"
    "cargo clippy --workspace -- -D warnings"
    "cargo nextest run --workspace"
)

# Tier 1: Functional Integration (Core E2E)
TIER1_TESTS=(
    "./scripts/v-integration.sh"
    "./scripts/test_shim_basic.sh"
    "./scripts/test_cow.sh"
    "./scripts/test_gc.sh"
    "./scripts/test_abi_hazard.sh"
    "python3 scripts/gc_e2e_test.py"
)

# Tier 2: Extended E2E (Demos + Issue Regressions)
TIER2_TESTS=(
    "./scripts/demo_phantom.sh"
    "./scripts/demo_gc.sh"

    "python3 scripts/e2e_test.py"
    # Issue Regression Tests
    "./tests/poc/test_issue1_recursion_deadlock.sh"
    "./tests/poc/test_issue2_tls_bootstrap_hang.sh"
    "./tests/poc/test_issue3_single_file_ingest.sh"

)

# Tier 3: Performance & Scale (Benchmarks)
TIER3_TESTS=(
    "python3 scripts/benchmark_suite.py --all"
)

# Tier 4: Comprehensive POC Suite (Gap Analysis + Security)
# NOTE: Gap tests report missing syscall implementations - expected failures
# These run in report mode (non-blocking) to generate coverage reports
TIER4_MODE="report"  # "strict" or "report"
TIER4_TESTS=(
    # Gap Tests (Quick static checks - some may fail = gap detected)
    "./tests/poc/test_gap_copy_file_range.sh"
    "./tests/poc/test_gap_ctime.sh"
    "./tests/poc/test_gap_dup_tracking.sh"
    "./tests/poc/test_gap_fchdir.sh"
    "./tests/poc/test_gap_fcntl_lock.sh"
    "./tests/poc/test_gap_flock_semantic.sh"
    "./tests/poc/test_gap_ftruncate.sh"
    "./tests/poc/test_gap_inode_uniqueness.sh"
    "./tests/poc/test_gap_lseek.sh"
    "./tests/poc/test_gap_mmap_shared.sh"
    "./tests/poc/test_gap_readdir_order.sh"
    "./tests/poc/test_gap_sendfile.sh"
    "./tests/poc/test_gap_st_dev.sh"
    "./tests/poc/test_gap_st_nlink.sh"
    "./tests/poc/test_gap_symlink.sh"
    "./tests/poc/test_gap_utimes.sh"
    "./tests/poc/test_gap_xattr.sh"
    # Security Verification
    "./tests/poc/verify_privilege_escalation.sh"
    # RFC-0047 Gap Analysis
    "./tests/poc/test_rfc0047_cow_write_close.sh"
    "./tests/poc/test_rfc0047_unlink_vfs.sh"
    "./tests/poc/verify_iron_law.sh"
    "./scripts/demo_dedup.sh"
    # RFC-0047 Extended Tests
    "./tests/poc/test_rfc0047_mkdir_vfs.sh"
    "./tests/poc/test_rfc0047_rename_vfs.sh"
    "./tests/poc/test_rfc0047_rmdir_vfs.sh"
    "./tests/poc/test_rfc0047_open_mode_check.sh"
)

